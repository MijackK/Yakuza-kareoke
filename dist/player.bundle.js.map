{"version":3,"file":"player.bundle.js","mappings":"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","sources":["webpack://yakuza-kareoke/webpack/bootstrap","webpack://yakuza-kareoke/webpack/runtime/global","webpack://yakuza-kareoke/webpack/runtime/publicPath","webpack://yakuza-kareoke/./src/audio/bass1drum-43078.mp3","webpack://yakuza-kareoke/./src/player-parts/general-parts.js","webpack://yakuza-kareoke/./src/player-parts/display-parts.js","webpack://yakuza-kareoke/./src/canvas/canvas.js","webpack://yakuza-kareoke/./src/config.js","webpack://yakuza-kareoke/./src/api/main.js","webpack://yakuza-kareoke/./src/utility.js/responseText.js","webpack://yakuza-kareoke/./src/api/kareoke.js","webpack://yakuza-kareoke/./src/utility.js/storage.js","webpack://yakuza-kareoke/./src/dom-manipulation/player-dom.js","webpack://yakuza-kareoke/./src/kareoke_player/player.js","webpack://yakuza-kareoke/./src/managers/map_manager.js","webpack://yakuza-kareoke/./src/managers/player_manager.js","webpack://yakuza-kareoke/./src/player-parts/input-parts.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && !scriptUrl) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","export default __webpack_public_path__ + \"969c855321ac764507533b16adaa3661.mp3\";","const kareokeFactory = () => {\r\n  const timeRange = (inputList) => [\r\n    Number((inputList[0].time - 0.1).toFixed(1)),\r\n    inputList[0].time,\r\n    Number((inputList[0].time + 0.1).toFixed(1)),\r\n    Number((inputList[0].time + 0.2).toFixed(1)),\r\n  ];\r\n  const greatRange = (inputList) => [\r\n    Number((inputList[0].time - 0.1).toFixed(1)),\r\n    inputList[0].time,\r\n  ];\r\n  const endRange = (inputList) => [\r\n    inputList[0].duration - 0.1,\r\n    inputList[0].duration,\r\n    inputList[0].duration + 0.1,\r\n    inputList[0].duration + 0.2,\r\n  ];\r\n  // checks if the object should run\r\n  const shouldRun = (inputList) => {\r\n    if (inputList.length === 0) {\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  // removes prompts from array\r\n  const removeInput = (duration, currentTime, inputObject, offset = 0) => {\r\n    const lengthBefore = inputObject.inputList.length;\r\n    // eslint-disable-next-line no-param-reassign\r\n    inputObject.inputList = inputObject.inputList.filter(\r\n      (prompt) => prompt.time + duration - offset > currentTime\r\n    );\r\n\r\n    if (lengthBefore - inputObject.inputList.length !== 0) {\r\n      return { Success: true, performance: \"miss\", incrementScore: 0 };\r\n    }\r\n\r\n    return { Success: false };\r\n  };\r\n\r\n  return {\r\n    timeRange,\r\n    greatRange,\r\n    endRange,\r\n    shouldRun,\r\n    removeInput,\r\n  };\r\n};\r\n\r\nexport default kareokeFactory;\r\n","import greatImg from \"../images/great.png\";\r\nimport missImg from \"../images/miss.png\";\r\nimport badImg from \"../images/bad.png\";\r\nimport goodImg from \"../images/good.png\";\r\n\r\nconst performanceImage = {\r\n  great: greatImg,\r\n  miss: missImg,\r\n  bad: badImg,\r\n  good: goodImg,\r\n};\r\n\r\nexport const feedBackVisualiserFactory = () => {\r\n  const performanceIndicator = document.querySelector(\r\n    \".performance-visualiser\"\r\n  );\r\n  const first = document.querySelector(\"#first\");\r\n  const second = document.querySelector(\"#second\");\r\n  const third = document.querySelector(\"#third\");\r\n  const fourth = document.querySelector(\"#fourth\");\r\n\r\n  const clearAnimation = (elements, newClass) => {\r\n    for (let i = 0; i < elements.length; i += 1) {\r\n      // eslint-disable-next-line no-param-reassign\r\n      elements[i].className = newClass;\r\n    }\r\n    // eslint-disable-next-line no-unused-expressions\r\n    // performanceIndicator.offsetTop; // cause the browser to repaint so the animations can restart.\r\n  };\r\n\r\n  const inputFeedback = (showInfo) => {\r\n    if (showInfo.Success) {\r\n      clearAnimation([first, second, third, fourth], \"button input-visualiser\");\r\n      switch (showInfo.Key) {\r\n        case \"ArrowUp\":\r\n          first.classList.toggle(\"explode-animation\");\r\n\r\n          break;\r\n        case \"ArrowRight\":\r\n          second.classList.toggle(\"explode-animation\");\r\n\r\n          break;\r\n        case \"ArrowLeft\":\r\n          third.classList.toggle(\"explode-animation\");\r\n\r\n          break;\r\n        case \"ArrowDown\":\r\n          fourth.classList.toggle(\"explode-animation\");\r\n\r\n          break;\r\n        default:\r\n      }\r\n    }\r\n  };\r\n  const showIndicator = (showInfo) => {\r\n    if (showInfo.Success) {\r\n      performanceIndicator.style.backgroundImage = `url(${\r\n        performanceImage[showInfo.performance]\r\n      })`;\r\n      clearAnimation([performanceIndicator], \"performance-visualiser\");\r\n      requestAnimationFrame(() => {\r\n        requestAnimationFrame(() => {\r\n          performanceIndicator.classList.toggle(\"popup-animation\");\r\n        });\r\n      });\r\n    }\r\n  };\r\n\r\n  return { inputFeedback, showIndicator, clearAnimation };\r\n};\r\nexport const autoThumbMovement = (position) => {\r\n  if (position > 1) return;\r\n  const thumb = document.querySelector(\".progress_thumb\");\r\n  const leftValue = position * 100;\r\n  thumb.style.left = `${leftValue}%`;\r\n};\r\nexport const moveProgressThumb = (event) => {\r\n  const progressBar = document.querySelector(\".p_container\");\r\n  const thumb = document.querySelector(\".progress_thumb\");\r\n  const coords = progressBar.getBoundingClientRect();\r\n  if (event.pageX < coords.left || event.pageX > coords.width + coords.left)\r\n    return;\r\n\r\n  thumb.style.left = `${((event.pageX - coords.left) / coords.width) * 100}%`;\r\n\r\n  // eslint-disable-next-line consistent-return\r\n  return (event.pageX - coords.left) / coords.width;\r\n};\r\nexport const mapProgressPrompts = (beatMap, duration) => {\r\n  const prompMap = document.querySelector(\"#prompt_location\");\r\n  const ctx = prompMap.getContext(\"2d\");\r\n  ctx.clearRect(0, 0, prompMap.width, prompMap.height);\r\n\r\n  for (let i = 0; i < beatMap.length; i += 1) {\r\n    const xPosition = (beatMap[i].time / duration) * prompMap.width;\r\n    const yPosition = beatMap[i].type === \"click\" ? 40 : 0;\r\n    ctx.strokeStyle =\r\n      // eslint-disable-next-line no-nested-ternary\r\n      beatMap[i].type === \"click\"\r\n        ? \"red\"\r\n        : beatMap[i].type === \"hold\"\r\n        ? \"rgb(12, 240, 240)\"\r\n        : \"blue\";\r\n    ctx.beginPath();\r\n    ctx.lineTo(xPosition, yPosition);\r\n    ctx.lineTo(xPosition, 80);\r\n    ctx.stroke();\r\n  }\r\n};\r\n","import holdText from \"../images/hold.png\";\r\nimport rapidText from \"../images/rapid.png\";\r\nimport upImg from \"../images/up.png\";\r\nimport leftImg from \"../images/left.png\";\r\nimport downImg from \"../images/down.png\";\r\nimport rightImg from \"../images/right.png\";\r\n\r\nconst entryOffset = 3.0; // determines the speed of prompt\r\nconst widthPerSecond = Number(((1897.5 - 400) / entryOffset).toFixed(3));\r\nlet key;\r\n\r\nconst symbols = {\r\n  ArrowUp: document.createElement(\"img\"),\r\n  ArrowLeft: document.createElement(\"img\"),\r\n  ArrowRight: document.createElement(\"img\"),\r\n  ArrowDown: document.createElement(\"img\"),\r\n};\r\nconst yPosition = {\r\n  ArrowUp: 30,\r\n  ArrowRight: 83,\r\n  ArrowLeft: 130,\r\n  ArrowDown: 185,\r\n};\r\nsymbols.ArrowUp.src = upImg;\r\nsymbols.ArrowLeft.src = leftImg;\r\nsymbols.ArrowDown.src = downImg;\r\nsymbols.ArrowRight.src = rightImg;\r\nlet ctx;\r\nlet myCanvas;\r\nconst textImage = document.createElement(\"img\");\r\nconst longPromptText = {\r\n  rapid: rapidText,\r\n  hold: holdText,\r\n};\r\n\r\nexport const init = () => {\r\n  myCanvas = document.querySelector(\".cplayer\");\r\n  myCanvas.width = window.innerWidth;\r\n  myCanvas.height = 215;\r\n\r\n  if (myCanvas.getContext) {\r\n    ctx = myCanvas.getContext(\"2d\"); // rendering context\r\n  } else console.log(\"canvas not supported\");\r\n};\r\n\r\nconst verticleLines = (elapsedTime) => {\r\n  for (let i = 0; i < 3; i += 1) {\r\n    const xCoords = 633 * (i + 1) - ((widthPerSecond * elapsedTime) % 633);\r\n\r\n    ctx.beginPath();\r\n    ctx.strokeStyle = \"gray\";\r\n    ctx.lineWidth = 1;\r\n    ctx.moveTo(xCoords, 15);\r\n    ctx.lineTo(xCoords, 195);\r\n    ctx.stroke();\r\n  }\r\n};\r\nconst spawnPrompts = (time, symbol) => {\r\n  const xPosition = 1897.5 - time * widthPerSecond;\r\n  ctx.fillStyle = \"blue\";\r\n  ctx.beginPath();\r\n  // ctx.arc(xPosition, yPosition, 22.5, 0, 2 * Math.PI);\r\n  ctx.drawImage(\r\n    symbols[symbol],\r\n    xPosition - 22.5,\r\n    yPosition[symbol] - 22.5,\r\n    55,\r\n    55\r\n  );\r\n  ctx.fill();\r\n  ctx.stroke();\r\n};\r\nconst spanwLongPrompts = (\r\n  elapsedTime,\r\n  promptTime,\r\n  travelTime,\r\n  duration,\r\n  type,\r\n  symbol\r\n) => {\r\n  textImage.src = longPromptText[type];\r\n  const startArc = 1897.5 - travelTime * widthPerSecond;\r\n  const endArc = startArc + duration * widthPerSecond;\r\n  const textP = startArc + (duration * widthPerSecond) / 2 - 25;\r\n  let size;\r\n  const clicked = symbol === key && elapsedTime >= promptTime - 0.2;\r\n\r\n  if (type === \"hold\") size = clicked ? 50 : 55;\r\n  if (type === \"rapid\") size = clicked ? 50 : 55;\r\n  ctx.font = \"40px serif\";\r\n  ctx.strokeStyle = type === \"rapid\" ? \"blue\" : \"#add8e6\";\r\n  ctx.lineWidth = 10;\r\n  ctx.beginPath();\r\n  ctx.arc(startArc, yPosition[symbol], 15.5, 0, 2 * Math.PI);\r\n  ctx.arc(endArc, yPosition[symbol], 15.5, 0, 2 * Math.PI);\r\n  ctx.stroke();\r\n  ctx.beginPath();\r\n  ctx.drawImage(\r\n    symbols[symbol],\r\n    startArc - 22.5,\r\n    yPosition[symbol] - 22.5,\r\n    size,\r\n    size\r\n  );\r\n  ctx.drawImage(textImage, textP, yPosition[symbol] - 22.5, 75, 35);\r\n  ctx.drawImage(\r\n    symbols[symbol],\r\n    endArc - 22.5,\r\n    yPosition[symbol] - 22.5,\r\n    size,\r\n    size\r\n  );\r\n  ctx.stroke();\r\n};\r\nexport const validPrompts = (time, buttons) => {\r\n  ctx.clearRect(0, 0, myCanvas.width, myCanvas.height);\r\n  verticleLines(time);\r\n  for (let i = 0; i < buttons.length; i += 1) {\r\n    const prompt = buttons[i];\r\n    const valid =\r\n      prompt.time + prompt.duration + 0.2 >= time &&\r\n      time >= prompt.time - entryOffset;\r\n    if (valid) {\r\n      switch (prompt.type) {\r\n        case \"click\":\r\n          spawnPrompts(time + entryOffset - prompt.time, prompt.key);\r\n          break;\r\n        default:\r\n          spanwLongPrompts(\r\n            time,\r\n            prompt.time,\r\n            time + entryOffset - prompt.time,\r\n            prompt.duration,\r\n            prompt.type,\r\n            prompt.key\r\n          );\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nwindow.addEventListener(\"resize\", () => {\r\n  myCanvas.width = window.innerWidth;\r\n});\r\n\r\nwindow.addEventListener(\"keydown\", (e) => {\r\n  key = e.key;\r\n});\r\nwindow.addEventListener(\"keyup\", () => {\r\n  key = null;\r\n});\r\n","const config = {\r\n  dealy: 3,\r\n  timingWindowEarly: 0.2,\r\n  timingWindowLate: 0.1,\r\n  pointWidth: 10,\r\n  pointSpacing: 10,\r\n  startTime: 3,\r\n  apiDomain: {\r\n    development: \"http://localhost:5000\",\r\n    production: \"https://shark-app-uuvcm.ondigitalocean.app/\",\r\n  },\r\n  // for fetch requests\r\n};\r\n\r\nexport default config;\r\n","import config from \"../config\";\r\nimport responseText from \"../utility.js/responseText\";\r\n\r\nconst { apiDomain } = config;\r\n\r\nexport default async function apiRequest({ url, options, headers = {} }) {\r\n  const location = [\"localhost\", \"127.0.0.1\"].includes(window.location.hostname)\r\n    ? apiDomain.development\r\n    : apiDomain.production;\r\n  const response = await fetch(`${location}/${url}`, {\r\n    mode: \"cors\",\r\n    credentials: \"include\",\r\n    headers: {\r\n      CSRF_TOKEN: sessionStorage.getItem(\"csrfToken\"),\r\n      ...headers,\r\n    },\r\n    ...options,\r\n  });\r\n\r\n  if (response.ok === false) {\r\n    const message = await response.text();\r\n    throw new Error(responseText(message));\r\n  }\r\n\r\n  if (response.status === 401) {\r\n    // delete session data and storage, and logout from front end\r\n  }\r\n  return response;\r\n}\r\n","// gets the response text from an http error\r\n\r\nexport default function responseText(html) {\r\n  const container = document.createElement(\"div\");\r\n  container.innerHTML = html;\r\n  const text =\r\n    container.querySelector(\"p\")?.textContent ||\r\n    \"error could not compelte request\";\r\n  return text;\r\n}\r\n","import apiRequest from \"./main\";\r\n\r\nexport async function uploadBeatmap(formData) {\r\n  // upload map, audio, background.\r\n  const options = {\r\n    method: \"post\",\r\n    body: formData,\r\n  };\r\n  // make sure to add csrf toekn here\r\n  const headers = {};\r\n  const response = await apiRequest({\r\n    url: `kareoke/add_map`,\r\n    options,\r\n    headers,\r\n  });\r\n  const data = await response.json();\r\n\r\n  return data;\r\n}\r\nexport async function editMedia(formData) {\r\n  const options = {\r\n    method: \"put\",\r\n    body: formData,\r\n  };\r\n  const headers = {};\r\n  const response = await apiRequest({\r\n    url: `kareoke/change_media`,\r\n    options,\r\n    headers,\r\n  });\r\n  const data = await response.text();\r\n  return data;\r\n}\r\n\r\nexport async function getBeatMaps(page, search, signal) {\r\n  const options = {\r\n    method: \"get\",\r\n    signal,\r\n  };\r\n  const headers = {};\r\n  const response = await apiRequest({\r\n    url: `kareoke/get_published?page=${page}&search=${search}`,\r\n    options,\r\n    headers,\r\n  });\r\n\r\n  const data = await response.json();\r\n\r\n  return data;\r\n}\r\nexport async function getUserBeatMaps() {\r\n  const options = {\r\n    method: \"get\",\r\n  };\r\n  const headers = {};\r\n  const response = await apiRequest({\r\n    url: `kareoke/get_user_maps`,\r\n    options,\r\n    headers,\r\n  });\r\n  const data = await response.json();\r\n  return data;\r\n}\r\n\r\nexport async function getBeatMap(id, signal) {\r\n  const options = {\r\n    method: \"get\",\r\n    signal,\r\n  };\r\n  const headers = {};\r\n  const response = await apiRequest({\r\n    url: `kareoke/get_map?mapID=${id}`,\r\n    options,\r\n    headers,\r\n  });\r\n\r\n  const data = await response.json();\r\n\r\n  return data;\r\n}\r\nexport async function getMedia(url, signal) {\r\n  const response = await fetch(url, {\r\n    method: \"get\",\r\n    signal,\r\n  });\r\n\r\n  const data = await response.blob();\r\n\r\n  return data;\r\n}\r\n\r\nexport async function saveBeatMap(mapData) {\r\n  const options = {\r\n    method: \"put\",\r\n    body: JSON.stringify(mapData),\r\n  };\r\n  const headers = { \"Content-Type\": \"application/json\" };\r\n  const response = await apiRequest({\r\n    url: `kareoke/save_map`,\r\n    options,\r\n    headers,\r\n  });\r\n\r\n  const data = await response.text();\r\n\r\n  return data;\r\n}\r\nexport async function deleteMap(id) {\r\n  const options = {\r\n    method: \"delete\",\r\n    body: JSON.stringify({ id }),\r\n  };\r\n  const headers = { \"Content-Type\": \"application/json\" };\r\n  const response = await apiRequest({\r\n    url: `kareoke/delete_map`,\r\n    options,\r\n    headers,\r\n  });\r\n\r\n  const data = await response.text();\r\n\r\n  return data;\r\n}\r\n\r\nexport async function saveHighScore(score, beatMapID) {\r\n  const options = {\r\n    method: \"put\",\r\n    body: JSON.stringify({ score, beatMapID }),\r\n  };\r\n  const headers = { \"Content-Type\": \"application/json\" };\r\n  const response = await apiRequest({\r\n    url: `kareoke/highscore`,\r\n    options,\r\n    headers,\r\n  });\r\n\r\n  const data = await response.text();\r\n\r\n  return data;\r\n}\r\n\r\nexport async function getMaps() {\r\n  const options = {\r\n    method: \"get\",\r\n  };\r\n  const headers = { \"Content-Type\": \"application/json\" };\r\n\r\n  const response = await apiRequest({\r\n    url: `kareoke/get_maps`,\r\n    options,\r\n    headers,\r\n  });\r\n\r\n  const data = await response.json();\r\n\r\n  return data;\r\n}\r\nexport async function publishRequest(beatMapID) {\r\n  const options = {\r\n    method: \"post\",\r\n    body: JSON.stringify({ beatMapID }),\r\n  };\r\n  const headers = { \"Content-Type\": \"application/json\" };\r\n  const response = await apiRequest({\r\n    url: `kareoke/publish_request`,\r\n    options,\r\n    headers,\r\n  });\r\n\r\n  const data = await response.text();\r\n\r\n  return data;\r\n}\r\n","export function saveUserInfo(info) {\r\n  localStorage.setItem(\"info\", JSON.stringify(info));\r\n}\r\nexport function getUserInfo() {\r\n  const info = localStorage.getItem(\"info\");\r\n  return JSON.parse(info);\r\n}\r\nconst getMaps = () => {\r\n  let maps = JSON.parse(localStorage.getItem(\"maps\"));\r\n  if (!maps) {\r\n    localStorage.setItem(\"maps\", JSON.stringify([]));\r\n    maps = JSON.parse(localStorage.getItem(\"maps\"));\r\n  }\r\n  return maps;\r\n};\r\nexport function getLocalMap(id) {\r\n  const maps = getMaps();\r\n  const found = maps.find((map) => map.id === id);\r\n  return found?.beatMap;\r\n}\r\n\r\nexport function saveLocalMap({ id, beatMap }) {\r\n  const maps = getMaps();\r\n  // find the map\r\n  const target = maps.find((map) => map.id === id);\r\n  if (target) {\r\n    target.beatMap = beatMap;\r\n  } else {\r\n    maps.push({ id, beatMap });\r\n  }\r\n  localStorage.setItem(\"maps\", JSON.stringify(maps));\r\n}\r\nexport function deleteLocalMap(id) {\r\n  const maps = getMaps();\r\n  const filtered = maps.filter((map) => map.id !== id);\r\n  localStorage.setItem(\"maps\", JSON.stringify(filtered));\r\n}\r\nexport function updateSettings(property, value) {\r\n  let settings = JSON.parse(localStorage.getItem(\"settings\"));\r\n  if (!settings) {\r\n    localStorage.setItem(\r\n      \"settings\",\r\n      JSON.stringify({\r\n        music: 0.5,\r\n        hit: 0.5,\r\n        offset: 0,\r\n        opacity: 0.7,\r\n      })\r\n    );\r\n    settings = JSON.parse(localStorage.getItem(\"settings\"));\r\n  }\r\n  settings[property] = value;\r\n  localStorage.setItem(\"settings\", JSON.stringify(settings));\r\n}\r\n\r\nexport function getSettings() {\r\n  const defaultSettings = {\r\n    music: 0.5,\r\n    hit: 0.7,\r\n    offset: 0,\r\n    opacity: 1,\r\n  };\r\n\r\n  const settings = JSON.parse(localStorage.getItem(\"settings\"));\r\n  return settings || defaultSettings;\r\n}\r\n","import greatImg from \"../images/great.png\";\r\nimport missImg from \"../images/miss.png\";\r\nimport badImg from \"../images/bad.png\";\r\nimport goodImg from \"../images/good.png\";\r\nimport { getSettings } from \"../utility.js/storage\";\r\n\r\nexport function addAudio(songSrc, backgroundSRC, clickSrc, extension) {\r\n  const settings = getSettings();\r\n  const song = document.querySelector(\"#song\");\r\n  const click = document.querySelector(\"#click-audio\");\r\n  const backgroundVideo = document.querySelector(\"#background-video\");\r\n  backgroundVideo.style.filter = `brightness(${settings.opacity})`;\r\n\r\n  const backgroundImage = document.querySelector(\"#background-image\");\r\n  backgroundImage.style.filter = `brightness(${settings.opacity})`;\r\n  song.src = songSrc;\r\n  song.volume = settings.music;\r\n  click.src = clickSrc;\r\n  click.volume = settings.hit;\r\n  song.currentTime = 0;\r\n  if (extension === \"mp4\") {\r\n    backgroundVideo.src = backgroundSRC;\r\n    backgroundVideo.currentTime = 0;\r\n\r\n    return;\r\n  }\r\n  backgroundImage.style.backgroundImage = `url(${backgroundSRC})`;\r\n}\r\nexport function addSettings() {}\r\n\r\nexport function resetMap() {\r\n  const song = document.querySelector(\"#song\");\r\n  const backgroundVideo = document.querySelector(\"#background-video\");\r\n  const comboContainer = document.querySelector(\".combo-container\");\r\n  const score = document.querySelector(\"#score\");\r\n  const scoreMenu = document.querySelector(\"#calculate-score\");\r\n  scoreMenu.style.display = \"none\";\r\n  score.textContent = \"\";\r\n  comboContainer.style.opacity = \"0\";\r\n  song.currentTime = 0;\r\n  backgroundVideo.currentTime = 0;\r\n}\r\nexport function pauseMap() {\r\n  const song = document.querySelector(\"#song\");\r\n  const backgroundVideo = document.querySelector(\"#background-video\");\r\n  song.pause();\r\n  backgroundVideo.pause();\r\n}\r\nexport function playMap() {\r\n  const settings = getSettings();\r\n  const song = document.querySelector(\"#song\");\r\n  song.volume = settings.music;\r\n  const backgroundVideo = document.querySelector(\"#background-video\");\r\n  song.play();\r\n  backgroundVideo.play();\r\n}\r\nexport function playClick() {\r\n  const click = document.querySelector(\"#click-audio\");\r\n  click.currentTime = 0;\r\n  click.play();\r\n}\r\nexport function startLoading() {\r\n  const loading = document.querySelector(\"#loading-map\");\r\n  loading.style.display = \"flex\";\r\n}\r\nexport function stopLoading() {\r\n  const loading = document.querySelector(\"#loading-map\");\r\n  loading.style.display = \"none\";\r\n}\r\nexport function openMenu() {\r\n  const pauseBtn = document.querySelector(\"#pause-btn\");\r\n  pauseBtn.style.display = \"none\";\r\n  const menu = document.querySelector(\"#menu-dialog\");\r\n  menu.style.display = \"flex\";\r\n}\r\nexport function closeMenu() {\r\n  const pauseBtn = document.querySelector(\"#pause-btn\");\r\n  pauseBtn.style.display = \"block\";\r\n  const menu = document.querySelector(\"#menu-dialog\");\r\n  menu.style.display = \"none\";\r\n}\r\nexport function addMapInfo(name, author) {\r\n  const songName = document.querySelector(\"#menu-name\");\r\n  const highScoreName = document.querySelector(\"#highscore-name\");\r\n  const mapAutor = document.querySelector(\"#map-author\");\r\n  songName.textContent = name;\r\n  highScoreName.textContent = name;\r\n  mapAutor.textContent = `Mapped by ${author}`;\r\n}\r\nexport function openFinalScore(score, scoreSummary, highscore, rankInfo) {\r\n  // decrease volume\r\n  const song = document.querySelector(\"#song\");\r\n  song.volume = 0.1;\r\n\r\n  const total = Object.keys(scoreSummary).reduce(\r\n    (acc, cur) => acc + scoreSummary[cur],\r\n    0\r\n  );\r\n  // show highscore\r\n  const highscoreElement = document.querySelector(\"#high-score\");\r\n  highscoreElement.style.display = highscore ? \"block\" : \"none\";\r\n\r\n  const scoreMenu = document.querySelector(\"#calculate-score\");\r\n  scoreMenu.style.display = \"flex\";\r\n  // add the score\r\n  const finalScore = document.querySelector(\"#final-score\");\r\n  finalScore.innerHTML = `Scored: <span class=\"score\"> ${score}</span>`;\r\n\r\n  // add the score letter\r\n  const scoreLetter = document.querySelector(\"#score-letter\");\r\n  scoreLetter.src = rankInfo.image;\r\n  scoreLetter.alt = rankInfo.rank;\r\n  scoreLetter.style.color = rankInfo.color;\r\n  scoreLetter.style.textShadow = `5px 3px 1px ${rankInfo.shadow}`;\r\n  // clean this up later\r\n  // update great\r\n  const great = document.querySelector(\"#great-hits\");\r\n  great.innerHTML = `\r\n  <div style=\"display:flex; align-items:center;\" >\r\n    <img style=\"width:117px; height:35px\"  src=${greatImg} alt=\"Great\" > \r\n    <span>: ${scoreSummary.great}</span> \r\n  </div>\r\n  <span>${((scoreSummary.great / total) * 100).toFixed(1) || \"0\"}%</span>`;\r\n  // update good\r\n  const good = document.querySelector(\"#good-hits\");\r\n  good.innerHTML = `\r\n  <div align-items:center>\r\n\r\n    <img style=\"width:117px; height:35px\" src=${goodImg} alt=\"Good\" /> \r\n    <span>: ${scoreSummary.good}</span> \r\n  </div>\r\n  <span>${((scoreSummary.good / total) * 100).toFixed(1) || \"0\"}%</span>`;\r\n\r\n  // update bad\r\n  const bad = document.querySelector(\"#bad-hits\");\r\n  bad.innerHTML = `\r\n  <div  style=\"display:flex;align-items:center\" >\r\n    <img style=\"width:117px; height:35px\"  src=${badImg} alt=\"Bad\" /> \r\n    <span>: ${scoreSummary.bad}</span> \r\n  </div>\r\n  <span>${((scoreSummary.bad / total) * 100).toFixed(1) || \"0\"}%</span>`;\r\n  // update miss\r\n  const miss = document.querySelector(\"#miss-hits\");\r\n  miss.innerHTML = `\r\n  <div style=\"display:flex;align-items:center\" >\r\n    <img style=\"width:117px; height:35px\"  src=${missImg} alt=\"Miss\" /> \r\n    <span>: ${scoreSummary.miss}</span> \r\n  </div>\r\n  <span>${((scoreSummary.miss / total) * 100).toFixed(1) || \"0\"}%</span>`;\r\n}\r\nexport function updateScore(score, combo) {\r\n  const comboContainer = document.querySelector(\".combo-container\");\r\n  const scoreText = document.querySelector(\"#score\");\r\n  const comboText = document.querySelector(\"#combo-score\");\r\n  scoreText.textContent = score;\r\n  comboText.textContent = combo;\r\n\r\n  if (combo === 0) {\r\n    comboContainer.style.opacity = \"0\";\r\n    document.body.className = \"cold-mode\";\r\n    return;\r\n  }\r\n  if (combo === 1) {\r\n    comboContainer.style.opacity = 1;\r\n  }\r\n  if (combo === 20) {\r\n    document.body.className = \"heat-mode\";\r\n  }\r\n\r\n  comboContainer.classList.toggle(\"jump-animation\");\r\n  requestAnimationFrame(() => {\r\n    requestAnimationFrame(() => {\r\n      comboContainer.classList.toggle(\"jump-animation\");\r\n    });\r\n  });\r\n}\r\n\r\nexport function initialize() {}\r\n","import \"./player.css\";\r\nimport \"../general.css\";\r\nimport clickSound from \"../audio/bass1drum-43078.mp3\";\r\nimport sScore from \"../images/s-score.png\";\r\nimport aScore from \"../images/a-score.png\";\r\nimport bScore from \"../images/b-score.png\";\r\nimport cScore from \"../images/c-score.png\";\r\nimport dScore from \"../images/d-score.png\";\r\n\r\nimport { click, hold, rapid } from \"../player-parts/input-parts\";\r\nimport { feedBackVisualiserFactory } from \"../player-parts/display-parts\";\r\nimport { validPrompts, init } from \"../canvas/canvas\";\r\nimport beatMapManager from \"../managers/map_manager\";\r\nimport PlayerManager from \"../managers/player_manager\";\r\n\r\nimport {\r\n  addAudio,\r\n  playMap,\r\n  pauseMap,\r\n  playClick,\r\n  stopLoading,\r\n  startLoading,\r\n  openMenu,\r\n  closeMenu,\r\n  initialize,\r\n  resetMap,\r\n  addMapInfo,\r\n  openFinalScore,\r\n  updateScore,\r\n} from \"../dom-manipulation/player-dom\";\r\n\r\nimport { saveHighScore } from \"../api/kareoke\";\r\n\r\ninitialize();\r\ninit();\r\nconst mapManager = beatMapManager();\r\nconst player = PlayerManager();\r\n\r\n// give song an src\r\n\r\n// give background an src\r\n\r\nconst scoreSummary = { great: 0, good: 0, bad: 0, miss: 0 };\r\nconst incrementValue = { great: 100, good: 60, bad: 0, miss: 0 };\r\n\r\nlet score = 0;\r\nlet combo = 0;\r\n\r\nlet keydown = false;\r\nlet animationID;\r\n\r\nlet buttons = [];\r\nlet clickInput = [];\r\n\r\nlet holdInput = [];\r\n\r\nlet rapidInput = [];\r\nlet highScore;\r\nlet mapID;\r\nconst scoreMultiplier = 1.5;\r\n// const finalScoreCalculator = () => {};\r\n\r\nconst calculateRank = (promtsLength, userScore) => {\r\n  const multiplier = promtsLength > 20 ? 1.5 : 1;\r\n  // the score removed from the total, since the user wont have heatmode till combo 20\r\n  const first20 =\r\n    promtsLength > 20 ? 20 * multiplier * incrementValue.great : 0;\r\n  const totalScore = promtsLength * incrementValue.great * multiplier - first20;\r\n\r\n  const accuracy = userScore / totalScore;\r\n\r\n  if (accuracy > 0.9)\r\n    return { rank: \"S\", color: \"#ffd700\", shadow: \"#ffd700ab\", image: sScore };\r\n  if (accuracy > 0.8)\r\n    return { rank: \"A\", color: \"#0ed145\", shadow: \"#0ed145ab\", image: aScore };\r\n  if (accuracy > 0.7)\r\n    return { rank: \"B\", color: \"#00a8f3\", shadow: \"#00a8f3ab\", image: bScore };\r\n  if (accuracy > 0.6)\r\n    return { rank: \"C\", color: \"#ff6c00\", shadow: \"#ff6c00ab\", image: cScore };\r\n  return { rank: \"D\", color: \"#ffffff\", shadow: \"#ffffffab\", image: dScore };\r\n};\r\nconst incrementScore = (info) => {\r\n  if (!info.Success) return;\r\n  scoreSummary[info.performance] += 1;\r\n\r\n  if ([\"bad\", \"miss\"].includes(info.performance)) {\r\n    combo = 0;\r\n    updateScore(score, combo);\r\n    return;\r\n  }\r\n\r\n  score +=\r\n    incrementValue[info.performance] * (combo >= 20 ? scoreMultiplier : 1);\r\n  combo += 1;\r\n\r\n  updateScore(score, combo);\r\n};\r\n\r\nconst feedBackVisualiser = feedBackVisualiserFactory();\r\n\r\nconst handleKeyDown = (key, inputObject, methodName) => {\r\n  let Success = false;\r\n  if (inputObject.inputList.length !== 0) {\r\n    // eslint-disable-next-line dot-notation\r\n    const Info = inputObject[methodName](\r\n      key,\r\n      player.getTimeElapsed(),\r\n      inputObject.inputList\r\n    );\r\n    feedBackVisualiser.inputFeedback(Info);\r\n    feedBackVisualiser.showIndicator(Info);\r\n    incrementScore(Info);\r\n    Success = Info.Success;\r\n  }\r\n  return Success;\r\n};\r\nconst rapidInputHandler = (key) => {\r\n  if (rapidInput.inputList.length !== 0) {\r\n    rapidInput.checkInput(\r\n      key,\r\n      rapidInput.inputList,\r\n      player.getTimeElapsed().toFixed(1)\r\n    );\r\n  }\r\n};\r\n\r\nconst removeGameInputs = (duration, inputObject, elapsedTime) => {\r\n  const info = inputObject.removeInput(duration, elapsedTime, inputObject);\r\n  feedBackVisualiser.showIndicator(info);\r\n  incrementScore(info);\r\n};\r\nconst stopMap = () => {\r\n  cancelAnimationFrame(animationID);\r\n  player.setPlay(false);\r\n\r\n  validPrompts(player.getTimeElapsed(), [\r\n    ...clickInput.inputList,\r\n    ...rapidInput.inputList,\r\n    ...holdInput.inputList,\r\n  ]);\r\n};\r\n\r\nconst timeController = () => {\r\n  if (player.getPlay() === false) return;\r\n  const timeNow = Number((Date.now() - player.getStartTime()) / 1000);\r\n  const elapsedTime =\r\n    player.getTimeElapsed() + (timeNow - player.getPreviousTime());\r\n\r\n  player.setTimeElapsed(elapsedTime);\r\n\r\n  if (\r\n    clickInput.inputList.length === 0 &&\r\n    holdInput.inputList.length === 0 &&\r\n    rapidInput.inputList.length === 0\r\n  ) {\r\n    stopMap();\r\n    const rank = calculateRank(buttons.length, score);\r\n    openFinalScore(score, scoreSummary, score > highScore, rank);\r\n    if (score > highScore) {\r\n      highScore = score;\r\n\r\n      saveHighScore(score, mapID)\r\n        .then((res) => {\r\n          console.log(res);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          console.log(\"Could not update highscore\");\r\n        });\r\n    }\r\n    return;\r\n  }\r\n  // check the number of clicks for a rapid prompt\r\n  if (rapidInput.inputList.length !== 0) {\r\n    const rapidInfo = rapidInput.countInputs(\r\n      rapidInput.inputList,\r\n      Number(player.getTimeElapsed().toFixed(1))\r\n    );\r\n    feedBackVisualiser.inputFeedback(rapidInfo);\r\n    feedBackVisualiser.showIndicator(rapidInfo);\r\n    incrementScore(rapidInfo);\r\n  }\r\n  // removing inputs prompts from array.\r\n  if (clickInput.inputList.length !== 0)\r\n    removeGameInputs(0.2, clickInput, player.getTimeElapsed());\r\n  if (holdInput.inputList.length !== 0)\r\n    removeGameInputs(\r\n      holdInput.inputList[0].duration + 0.2,\r\n      holdInput,\r\n      player.getTimeElapsed()\r\n    );\r\n  if (rapidInput.inputList.length !== 0)\r\n    removeGameInputs(\r\n      rapidInput.inputList[0].duration + 0.2,\r\n      rapidInput,\r\n      player.getTimeElapsed()\r\n    );\r\n  player.setPreviousTime(timeNow);\r\n\r\n  document.querySelector(\"#time\").textContent = player\r\n    .getTimeElapsed()\r\n    .toFixed(3);\r\n};\r\nconst AnimatePrompts = () => {\r\n  timeController();\r\n  const promptArrays = clickInput.inputList\r\n    .concat(rapidInput.inputList)\r\n    .concat(holdInput.inputList);\r\n\r\n  // adding prompts to the Canvas\r\n  validPrompts(player.getTimeElapsed(), promptArrays, player.getPlay());\r\n  animationID = requestAnimationFrame(AnimatePrompts);\r\n};\r\nconst startMap = () => {\r\n  animationID = requestAnimationFrame(AnimatePrompts);\r\n  player.startMap();\r\n  playMap();\r\n  closeMenu();\r\n};\r\nconst initalizeButtons = () => {\r\n  const buttonsCopy = buttons.map((button) => ({ ...button }));\r\n  clickInput = click(buttonsCopy.filter((element) => element.type === \"click\"));\r\n\r\n  holdInput = hold(buttonsCopy.filter((element) => element.type === \"hold\"));\r\n\r\n  rapidInput = rapid(buttonsCopy.filter((element) => element.type === \"rapid\"));\r\n};\r\nconst pause = () => {\r\n  stopMap();\r\n  pauseMap();\r\n  openMenu();\r\n};\r\nconst restart = () => {\r\n  player.setTimeElapsed(0);\r\n  player.setPreviousTime(0);\r\n\r\n  score = 0;\r\n  combo = 0;\r\n  scoreSummary.great = 0;\r\n  scoreSummary.good = 0;\r\n  scoreSummary.bad = 0;\r\n  scoreSummary.miss = 0;\r\n  resetMap();\r\n  updateScore(0, 0);\r\n  // reload them\r\n  initalizeButtons();\r\n\r\n  startMap();\r\n};\r\n\r\n// Eventlistners and logic for getting\r\ndocument.querySelector(\"body\").addEventListener(\"keydown\", (e) => {\r\n  if (!keydown) {\r\n    if (handleKeyDown(e.key, clickInput, \"checkInput\") !== true) {\r\n      // sometimes hold and click inputs can be valid in the same time frame,\r\n      // this will make sure that they dont trigger at the same time.\r\n      handleKeyDown(e.key, holdInput, \"checkDown\");\r\n    }\r\n    rapidInputHandler(e.key);\r\n    playClick();\r\n    keydown = true;\r\n  }\r\n});\r\n\r\ndocument.querySelector(\"body\").addEventListener(\"keyup\", (e) => {\r\n  keydown = false;\r\n\r\n  if (holdInput.inputList.length !== 0) {\r\n    const holdInfo = holdInput.checkUp(\r\n      e.key,\r\n      player.getTimeElapsed().toFixed(1),\r\n      holdInput.inputList\r\n    );\r\n    feedBackVisualiser.inputFeedback(holdInfo);\r\n    feedBackVisualiser.showIndicator(holdInfo);\r\n\r\n    if (holdInfo.Success === true) {\r\n      playClick();\r\n    }\r\n    incrementScore(holdInfo);\r\n  }\r\n});\r\ndocument.querySelector(\"body\").addEventListener(\"keyup\", (e) => {\r\n  if (e.key === \"Escape\") {\r\n    if (player.getPlay()) {\r\n      pause();\r\n      return;\r\n    }\r\n    startMap();\r\n  }\r\n});\r\ndocument.querySelector(\"#resume-btn\").addEventListener(\"click\", () => {\r\n  startMap();\r\n});\r\ndocument.querySelector(\"#home-btn\").addEventListener(\"click\", () => {\r\n  window.location.href = \"index.html\";\r\n  // change this to be dynamic instead of static\r\n});\r\n\r\ndocument\r\n  .querySelector(\"#restart-btn\")\r\n  .addEventListener(\"click\", () => restart());\r\ndocument.querySelector(\"#pause-btn\").addEventListener(\"click\", () => pause());\r\ndocument\r\n  .querySelector(\"#play-again\")\r\n  .addEventListener(\"click\", () => restart());\r\n\r\nconst songID = document.location.search.split(\"?song=\")[1];\r\nstartLoading();\r\n\r\nmapManager\r\n  .loadMap(songID)\r\n  .then(({ mapInfo, audioUrl, backgroundUrl, extension }) => {\r\n    buttons = JSON.parse(mapInfo.beatMap);\r\n    highScore = mapInfo.highscore || 0;\r\n    console.log(highScore);\r\n    mapID = mapInfo.id;\r\n\r\n    addMapInfo(mapInfo.name, mapInfo.author);\r\n\r\n    // load them\r\n    initalizeButtons();\r\n    // add media sources\r\n    addAudio(audioUrl, backgroundUrl, clickSound, extension);\r\n    openMenu();\r\n  })\r\n  .catch((err) => {\r\n    console.log(err);\r\n    // open dialog to allow user to pick a song\r\n  })\r\n  .finally(() => {\r\n    stopLoading();\r\n  });\r\n","import {\r\n  getBeatMaps,\r\n  getBeatMap,\r\n  getMedia,\r\n  uploadBeatmap,\r\n  getUserBeatMaps,\r\n  saveBeatMap,\r\n  deleteMap,\r\n  editMedia,\r\n  publishRequest,\r\n} from \"../api/kareoke\";\r\n\r\nimport {\r\n  getLocalMap,\r\n  saveLocalMap,\r\n  deleteLocalMap,\r\n} from \"../utility.js/storage\";\r\n\r\nexport default function beatMapManager() {\r\n  let audioUrl;\r\n  let backgroundUrl;\r\n  let selectedMap;\r\n  let controller = new AbortController();\r\n  let searchController = new AbortController();\r\n\r\n  const getBackgroundUrl = () => backgroundUrl;\r\n  const getAudioUrl = () => audioUrl;\r\n  const getSelectedMap = () => selectedMap;\r\n\r\n  const setSelectedMap = (map) => {\r\n    selectedMap = map;\r\n    localStorage.setItem(\"selectedMap\", JSON.stringify(map));\r\n    const localMap = getLocalMap(selectedMap.id);\r\n\r\n    if (localMap) {\r\n      selectedMap.beatMap = localMap;\r\n    }\r\n    if (!localMap) {\r\n      const remoteMap = JSON.parse(selectedMap.beatMap);\r\n      selectedMap.beatMap = remoteMap;\r\n      saveLocalMap({ id: selectedMap.id, beatMap: remoteMap });\r\n    }\r\n  };\r\n\r\n  const clearSelectedMap = () => {\r\n    localStorage.removeItem(\"selectedMap\");\r\n    selectedMap = null;\r\n  };\r\n\r\n  const abortSelection = () => {\r\n    controller.abort();\r\n    controller = new AbortController();\r\n  };\r\n  const abortSearch = () => {\r\n    searchController.abort();\r\n    searchController = new AbortController();\r\n  };\r\n\r\n  const generateBlobUrl = async ({ audio, background }) => {\r\n    URL.revokeObjectURL(backgroundUrl);\r\n    URL.revokeObjectURL(audioUrl);\r\n    const [audioBlob, backgroundBloB] = await Promise.all([\r\n      getMedia(audio, controller.signal),\r\n      getMedia(background, controller.signal),\r\n    ]);\r\n    audioUrl = URL.createObjectURL(audioBlob);\r\n    backgroundUrl = URL.createObjectURL(backgroundBloB);\r\n  };\r\n  const getExtension = (name) => name.split(\".\").pop();\r\n\r\n  const checkSelectedSong = async () => {\r\n    const map = JSON.parse(localStorage.getItem(\"selectedMap\"));\r\n    if (map) {\r\n      const getMap = await getBeatMap(map.id, controller.signal);\r\n      setSelectedMap(getMap);\r\n      await generateBlobUrl(selectedMap);\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n  const addBeatMap = (formData) => {\r\n    const response = uploadBeatmap(formData);\r\n    return response;\r\n  };\r\n  const changeMedia = async (type, file) => {\r\n    // check if changing media will exceed maximum file size\r\n    if (!selectedMap) {\r\n      throw new Error(\"No map selected\");\r\n    }\r\n    const currentMap = selectedMap;\r\n    const formData = new FormData();\r\n    formData.append(\"type\", type);\r\n    formData.append(\"media\", file);\r\n    formData.append(\"mapID\", selectedMap.id);\r\n    const newURL = await editMedia(formData);\r\n    selectedMap[type] = newURL;\r\n    return {\r\n      newURL,\r\n      reload: selectedMap === currentMap,\r\n      extension: getExtension(newURL),\r\n    };\r\n  };\r\n  const deleteBeatMap = async (id) => {\r\n    const response = await deleteMap(id);\r\n    URL.revokeObjectURL(backgroundUrl);\r\n    URL.revokeObjectURL(audioUrl);\r\n    if (id === selectedMap?.id) {\r\n      clearSelectedMap();\r\n    }\r\n    deleteLocalMap(id);\r\n\r\n    return response;\r\n  };\r\n  const publishMap = async (mapID) => {\r\n    const response = await publishRequest(mapID);\r\n    return response;\r\n  };\r\n\r\n  const saveMapRemote = async (id) => {\r\n    const response = await saveBeatMap({\r\n      id,\r\n      column: \"beatMap\",\r\n      value: getLocalMap(id) || [],\r\n    });\r\n\r\n    return response;\r\n  };\r\n\r\n  const saveMapName = async (value) => {\r\n    if (!selectedMap) {\r\n      throw new Error(\"No map selected\");\r\n    }\r\n    const currentMap = selectedMap;\r\n    const response = await saveBeatMap({\r\n      id: selectedMap.id,\r\n      column: \"name\",\r\n      value,\r\n    });\r\n    currentMap.name = value;\r\n    // fix this so that updating the selected map(dom) doesnt need the extension\r\n    return {\r\n      response,\r\n      reload: currentMap === selectedMap,\r\n      extension: getExtension(currentMap.background),\r\n    };\r\n  };\r\n  const handleGetUserBeatMaps = async () => {\r\n    const beatMaps = await getUserBeatMaps();\r\n    return beatMaps;\r\n  };\r\n  const handleGetBeatMaps = async (page, search) => {\r\n    const searchKeys = search\r\n      .split(\" \")\r\n      .filter((key) => key !== \"\")\r\n      .join(\",\");\r\n    abortSearch();\r\n    const response = await getBeatMaps(\r\n      page,\r\n      searchKeys,\r\n      searchController.signal\r\n    );\r\n    return response;\r\n  };\r\n  const loadMap = async (id) => {\r\n    const mapInfo = await getBeatMap(id);\r\n    await generateBlobUrl(mapInfo);\r\n\r\n    return {\r\n      mapInfo,\r\n      audioUrl,\r\n      backgroundUrl,\r\n      extension: getExtension(mapInfo.background),\r\n    };\r\n  };\r\n\r\n  return {\r\n    saveMapRemote,\r\n    handleGetUserBeatMaps,\r\n    handleGetBeatMaps,\r\n    getBackgroundUrl,\r\n    getAudioUrl,\r\n    generateBlobUrl,\r\n    getSelectedMap,\r\n    setSelectedMap,\r\n    addBeatMap,\r\n    checkSelectedSong,\r\n    getExtension,\r\n    abortSelection,\r\n    clearSelectedMap,\r\n    loadMap,\r\n    deleteBeatMap,\r\n    publishMap,\r\n    saveMapName,\r\n    changeMedia,\r\n  };\r\n}\r\n","// add data and function having to do with the player here\r\nimport { getSettings } from \"../utility.js/storage\";\r\n\r\nexport default function PlayerManager() {\r\n  const offset = getSettings().offset / 1000;\r\n  console.log(offset);\r\n\r\n  let timeElapsed = 0 + offset;\r\n  let previousTime = 0 + offset;\r\n  let play = false;\r\n  let startTime;\r\n  let score = 0;\r\n\r\n  // getters\r\n\r\n  const getTimeElapsed = () => timeElapsed;\r\n  const getPreviousTime = () => previousTime;\r\n  const getPlay = () => play;\r\n  const getStartTime = () => startTime;\r\n  const getScore = () => score;\r\n\r\n  // setters\r\n  const setTimeElapsed = (value) => {\r\n    timeElapsed = value + offset;\r\n  };\r\n  const setPreviousTime = (value) => {\r\n    previousTime = value + offset;\r\n  };\r\n  const setPlay = (value) => {\r\n    play = value;\r\n  };\r\n  const startMap = () => {\r\n    startTime = Date.now() - timeElapsed * 1000;\r\n    play = true;\r\n  };\r\n\r\n  return {\r\n    getTimeElapsed,\r\n    getPreviousTime,\r\n    getPlay,\r\n    getStartTime,\r\n    getScore,\r\n    setPreviousTime,\r\n    setTimeElapsed,\r\n    setPlay,\r\n    startMap,\r\n  };\r\n}\r\n","import kareokeFactory from \"./general-parts\";\r\n\r\nexport const click = (inputList) => {\r\n  const general = kareokeFactory();\r\n  const greatTimeWindow = 0.075;\r\n\r\n  const checkInput = (key, inputTime, inputs) => {\r\n    let Success = false;\r\n    const Key = inputs[0].key;\r\n    let performance = \"bad\";\r\n\r\n    const convert = Number(inputTime.toFixed(1));\r\n\r\n    if (general.timeRange(inputs).includes(convert)) {\r\n      Success = true;\r\n      if (key === inputs[0].key) {\r\n        performance =\r\n          inputTime >= inputs[0].time - greatTimeWindow &&\r\n          inputTime <= inputs[0].time + greatTimeWindow\r\n            ? \"great\"\r\n            : \"good\";\r\n      }\r\n\r\n      inputs.shift();\r\n    }\r\n    return { Success, Key, performance };\r\n  };\r\n  return { checkInput, inputList, ...general };\r\n};\r\n\r\nexport const hold = (inputList) => {\r\n  const general = kareokeFactory();\r\n  let clickTime;\r\n  const checkDown = (key, time, inputs) => {\r\n    const inputTime = Number(time).toFixed(1);\r\n    const validRange =\r\n      inputs[0].time - 0.1 <= inputTime &&\r\n      inputs[0].time + inputs[0].duration > inputTime;\r\n    let Success = false;\r\n    const performance = \"bad\";\r\n    const Key = inputs[0].key;\r\n    if (validRange) {\r\n      if (key === inputs[0].key) {\r\n        // eslint-disable-next-line no-param-reassign\r\n        clickTime = inputTime;\r\n      } else {\r\n        inputs.shift();\r\n        Success = true;\r\n      }\r\n    }\r\n    // eslint-disable-next-line consistent-return\r\n    return { Success, performance, Key };\r\n  };\r\n  const checkUp = (key, releaseTime, inputs) => {\r\n    const difference = Number((releaseTime - clickTime).toFixed(1));\r\n    const endRange = general.endRange(inputs);\r\n    let performance = \"bad\";\r\n    let Success = false;\r\n    const Key = inputs[0].key;\r\n\r\n    // condition for great release\r\n    if (endRange.includes(difference) && key === inputs[0].key) {\r\n      inputs.shift();\r\n      Success = true;\r\n      performance = \"great\";\r\n    } else if (\r\n      // condition for good release\r\n      clickTime < releaseTime &&\r\n      releaseTime >= inputs[0].time + inputs[0].duration / 2\r\n    ) {\r\n      inputs.shift();\r\n      Success = true;\r\n      performance = \"good\";\r\n    } else if (\r\n      // condition for bad release\r\n      clickTime < releaseTime &&\r\n      releaseTime < inputs[0].time + inputs[0].duration / 2\r\n    ) {\r\n      inputs.shift();\r\n      Success = true;\r\n    }\r\n    clickTime = Infinity;\r\n\r\n    return { Success, Key, performance };\r\n  };\r\n\r\n  return { checkDown, checkUp, inputList, ...general };\r\n};\r\n\r\nexport const rapid = (inputList) => {\r\n  let clicks = 0;\r\n  const clickPerSecond = 6;\r\n  const checkInput = (key, inputs, inputTime) => {\r\n    const totalDuration = inputs[0].time + inputs[0].duration;\r\n    if (\r\n      inputTime >= inputs[0].time &&\r\n      inputTime < totalDuration &&\r\n      key === inputs[0].key\r\n    ) {\r\n      clicks += 1;\r\n      // eslint-disable-next-line no-param-reassign\r\n      inputs[0].click = clicks;\r\n    }\r\n  };\r\n  const countInputs = (inputs, currentTime) => {\r\n    const totalDuration = inputs[0].time + inputs[0].duration;\r\n    const neededClicks = inputs[0].duration * clickPerSecond;\r\n    let Success = false;\r\n    let performance = \"bad\";\r\n    const Key = inputs[0].key;\r\n\r\n    if (currentTime >= totalDuration) {\r\n      if (clicks >= neededClicks) {\r\n        inputs.shift();\r\n        Success = true;\r\n        performance = \"great\";\r\n      }\r\n      if (clicks > 0 && clicks < neededClicks) {\r\n        if (clicks >= neededClicks / 2) {\r\n          performance = \"good\";\r\n        }\r\n        inputs.shift();\r\n        Success = true;\r\n      }\r\n\r\n      clicks = 0;\r\n    }\r\n\r\n    return { Success, Key, performance };\r\n  };\r\n  return { checkInput, countInputs, inputList, ...kareokeFactory() };\r\n};\r\n"],"names":["__webpack_require__","g","globalThis","this","Function","e","window","scriptUrl","importScripts","location","document","currentScript","src","scripts","getElementsByTagName","length","i","Error","replace","p","timeRange","inputList","Number","time","toFixed","greatRange","endRange","duration","shouldRun","removeInput","currentTime","inputObject","offset","lengthBefore","filter","prompt","Success","performance","incrementScore","performanceImage","great","miss","bad","good","widthPerSecond","key","symbols","ArrowUp","createElement","ArrowLeft","ArrowRight","ArrowDown","yPosition","ctx","myCanvas","textImage","longPromptText","rapid","hold","spawnPrompts","symbol","xPosition","fillStyle","beginPath","drawImage","fill","stroke","spanwLongPrompts","elapsedTime","promptTime","travelTime","type","startArc","endArc","textP","size","clicked","font","strokeStyle","lineWidth","arc","Math","PI","validPrompts","buttons","clearRect","width","height","xCoords","moveTo","lineTo","verticleLines","addEventListener","innerWidth","apiDomain","dealy","timingWindowEarly","timingWindowLate","pointWidth","pointSpacing","startTime","development","production","async","url","options","headers","includes","hostname","response","fetch","mode","credentials","CSRF_TOKEN","sessionStorage","getItem","ok","message","text","html","container","innerHTML","querySelector","textContent","responseText","status","getBeatMap","id","signal","method","json","getMedia","blob","saveBeatMap","mapData","body","JSON","stringify","maps","parse","localStorage","setItem","getLocalMap","found","find","map","beatMap","getSettings","music","hit","opacity","playClick","click","play","openMenu","style","display","updateScore","score","combo","comboContainer","scoreText","comboText","className","classList","toggle","requestAnimationFrame","getContext","console","log","mapManager","audioUrl","backgroundUrl","selectedMap","controller","AbortController","searchController","setSelectedMap","localMap","remoteMap","target","push","saveLocalMap","clearSelectedMap","removeItem","generateBlobUrl","audio","background","URL","revokeObjectURL","audioBlob","backgroundBloB","Promise","all","createObjectURL","getExtension","name","split","pop","saveMapRemote","column","value","handleGetUserBeatMaps","getUserBeatMaps","handleGetBeatMaps","page","search","searchKeys","join","abort","getBeatMaps","getBackgroundUrl","getAudioUrl","getSelectedMap","addBeatMap","formData","uploadBeatmap","checkSelectedSong","getMap","abortSelection","loadMap","mapInfo","extension","deleteBeatMap","deleteMap","filtered","deleteLocalMap","publishMap","mapID","beatMapID","publishRequest","saveMapName","currentMap","reload","changeMedia","file","FormData","append","newURL","editMedia","beatMapManager","player","timeElapsed","previousTime","getTimeElapsed","getPreviousTime","getPlay","getStartTime","getScore","setPreviousTime","setTimeElapsed","setPlay","startMap","Date","now","PlayerManager","scoreSummary","incrementValue","animationID","highScore","keydown","clickInput","holdInput","rapidInput","info","feedBackVisualiser","performanceIndicator","first","second","third","fourth","clearAnimation","elements","newClass","inputFeedback","showInfo","Key","showIndicator","backgroundImage","feedBackVisualiserFactory","handleKeyDown","methodName","Info","removeGameInputs","stopMap","cancelAnimationFrame","AnimatePrompts","timeNow","rank","promtsLength","userScore","multiplier","accuracy","color","shadow","image","calculateRank","highscore","rankInfo","volume","total","Object","keys","reduce","acc","cur","scoreLetter","alt","textShadow","openFinalScore","saveHighScore","then","res","catch","err","rapidInfo","countInputs","timeController","promptArrays","concat","settings","song","backgroundVideo","playMap","initalizeButtons","buttonsCopy","button","general","checkInput","inputTime","inputs","convert","shift","element","clickTime","checkDown","validRange","checkUp","releaseTime","difference","Infinity","clicks","totalDuration","neededClicks","pause","pauseMap","restart","resetMap","rapidInputHandler","holdInfo","href","songID","author","songName","highScoreName","mapAutor","addMapInfo","songSrc","backgroundSRC","clickSrc","addAudio","finally"],"sourceRoot":""}