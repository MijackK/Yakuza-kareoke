(()=>{"use strict";const{apiDomain:e}={dealy:3,timingWindowEarly:.2,timingWindowLate:.1,pointWidth:10,pointSpacing:10,startTime:3,apiDomain:{development:"http://localhost:5000",production:"https://kareokeapi.onrender.com/"}};async function t({url:t,options:o,headers:n={}}){const a=["localhost","127.0.0.1"].includes(window.location.hostname)?e.development:e.production,r=await fetch(`${a}/${t}`,{mode:"cors",credentials:"include",headers:{CSRF_TOKEN:sessionStorage.getItem("csrfToken"),...n},...o});if(!1===r.ok){const e=await r.text();throw new Error(function(e){const t=document.createElement("div");return t.innerHTML=e,t.querySelector("p")?.textContent||"error could not compelte request"}(e))}return r.status,r}const o=new URLSearchParams(window.location.search).get("token"),n=document.querySelector("#password-reset"),a=document.querySelector("#change-form");o&&(n.style.display="none",a.style.display="flex"),console.log(n),n.addEventListener("submit",(e=>{e.preventDefault();const o=new FormData(n),a=n.querySelector("button");a.disabled=!0,async function(e){const o={body:e,method:"post"},n=await t({url:"auth/generate_reset_url",options:o});return await n.text()}(o).then((e=>{n.innerHTML=`<label> ${e} </label>`,setTimeout((()=>{window.location.pathname=""}),1e3)})).catch((e=>{console.log(e),n.querySelector("p").style.display="block"})).finally((()=>{a.disabled=!1}))})),a.addEventListener("submit",(e=>{e.preventDefault();const n=a.querySelector("button"),r=new FormData(a);r.set("token",o);const s=a.querySelector("p");(async function(e){const o={body:e,method:"post"},n=await t({url:"auth/recover_password",options:o});return await n.text()})(r).then((e=>{a.innerHTML=`<label> ${e} </label>`,setTimeout((()=>{window.location.pathname=""}),1e3)})).catch((e=>{console.log(e),s.style.display="block"})).finally((()=>{n.disabled=!1}))}))})();
//# sourceMappingURL=reset.bundle.js.map